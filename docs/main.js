var app=function(t){"use strict";function n(){}function e(t,n){for(const e in n)t[e]=n[e];return t}function o(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(o)}function a(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,...e){if(null==t)return n;const o=t.subscribe(...e);return o.unsubscribe?()=>o.unsubscribe():o}function l(t,n,e){t.$$.on_destroy.push(c(n,e))}function u(t,n,e,o){if(t){const r=f(t,n,e,o);return t[0](r)}}function f(t,n,o,r){return t[1]&&r?e(o.ctx.slice(),t[1](r(n))):o.ctx}function d(t,n,e,o){if(t[2]&&o){const r=t[2](o(e));if("object"==typeof n.dirty){const t=[],e=Math.max(n.dirty.length,r.length);for(let o=0;o<e;o+=1)t[o]=n.dirty[o]|r[o];return t}return n.dirty|r}return n.dirty}function m(t){const n={};for(const e in t)"$"!==e[0]&&(n[e]=t[e]);return n}function p(t,n,e=n){return t.set(e),n}function h(t,n){t.appendChild(n)}function g(t,n,e){t.insertBefore(n,e||null)}function $(t){t.parentNode.removeChild(t)}function v(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function _(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function w(){return y(" ")}function x(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function b(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function E(t){return""===t?void 0:+t}function A(t,n){n=""+n,t.data!==n&&(t.data=n)}function T(t,n){(null!=n||t.value)&&(t.value=n)}function L(t,n,e,o){t.style.setProperty(n,e,o?"important":"")}let M;function F(t){M=t}function I(){if(!M)throw new Error("Function called outside component initialization");return M}function S(t){I().$$.on_mount.push(t)}function R(t){I().$$.on_destroy.push(t)}function O(){const t=I();return(n,e)=>{const o=t.$$.callbacks[n];if(o){const r=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);o.slice().forEach(n=>{n.call(t,r)})}}}function D(t,n){I().$$.context.set(t,n)}function N(t){return I().$$.context.get(t)}const C=[],P=[],z=[],H=[],G=Promise.resolve();let U=!1;function k(){U||(U=!0,G.then(j))}function B(t){z.push(t)}let Y=!1;const q=new Set;function j(){if(!Y){Y=!0;do{for(let t=0;t<C.length;t+=1){const n=C[t];F(n),X(n.$$)}for(C.length=0;P.length;)P.pop()();for(let t=0;t<z.length;t+=1){const n=z[t];q.has(n)||(q.add(n),n())}z.length=0}while(C.length);for(;H.length;)H.pop()();U=!1,Y=!1,q.clear()}}function X(t){if(null!==t.fragment){t.update(),i(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(B)}}const W=new Set;let V;function J(){V={r:0,c:[],p:V}}function K(){V.r||i(V.c),V=V.p}function Q(t,n){t&&t.i&&(W.delete(t),t.i(n))}function Z(t,n,e,o){if(t&&t.o){if(W.has(t))return;W.add(t),V.c.push(()=>{W.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}function tt(t){t&&t.c()}function nt(t,n,e){const{fragment:r,on_mount:s,on_destroy:c,after_update:l}=t.$$;r&&r.m(n,e),B(()=>{const n=s.map(o).filter(a);c?c.push(...n):i(n),t.$$.on_mount=[]}),l.forEach(B)}function et(t,n){const e=t.$$;null!==e.fragment&&(i(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function ot(t,e,o,a,s,c,l=[-1]){const u=M;F(t);const f=e.props||{},d=t.$$={fragment:null,ctx:null,props:c,update:n,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:l};let m=!1;d.ctx=o?o(t,f,(n,e,...o)=>{const r=o.length?o[0]:e;return d.ctx&&s(d.ctx[n],d.ctx[n]=r)&&(d.bound[n]&&d.bound[n](r),m&&function(t,n){-1===t.$$.dirty[0]&&(C.push(t),k(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}(t,n)),e}):[],d.update(),m=!0,i(d.before_update),d.fragment=!!a&&a(d.ctx),e.target&&(e.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):d.fragment&&d.fragment.c(),e.intro&&Q(t.$$.fragment),nt(t,e.target,e.anchor),j()),F(u)}class rt{$destroy(){et(this,1),this.$destroy=n}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function it(t){let e,o,r,i,a,s;return{c(){e=_("div"),o=_("h3"),r=w(),i=_("canvas"),b(i,"width",a=32),b(i,"height",s=32),b(i,"class","svelte-10c35ml"),b(e,"id","view"),b(e,"class","svelte-10c35ml")},m(n,a){g(n,e,a),h(e,o),o.innerHTML=t[0],h(e,r),h(e,i),t[5](i)},p(t,[n]){1&n&&(o.innerHTML=t[0])},i:n,o:n,d(n){n&&$(e),t[5](null)}}}function at(t,n,e){let o,r,{greeting:i}=n;return S(()=>{const t=r.getContext("2d");let n;return t.fillStyle="#00f",t.fillRect(0,0,r.width,r.height),t.fillStyle="#fff",t.font="20px Arial",t.fillText("2d Canvas works, too",10,100),function e(){n=requestAnimationFrame(e);const o=t.getImageData(0,0,r.width,r.height);for(let t=0;t<o.data.length;t+=4){const n=t/4,e=n%r.width,i=n/r.height>>>0,a=window.performance.now(),s=64+128*e/r.width+64*Math.sin(a/1e3),c=64+128*i/r.height+64*Math.cos(a/1e3),l=128;o.data[t+0]=s,o.data[t+1]=c,o.data[t+2]=l,o.data[t+3]=255}t.putImageData(o,0,0)}(),()=>{cancelAnimationFrame(n)}}),t.$set=t=>{"greeting"in t&&e(0,i=t.greeting)},o="enter your pin",[i,r,"enter your pin",void 0,function(){alert("submitted undefined")},function(t){P[t?"unshift":"push"](()=>{e(1,r=t)})}]}const st=[];function ct(t,e=n){let o;const r=[];function i(n){if(s(t,n)&&(t=n,o)){const n=!st.length;for(let n=0;n<r.length;n+=1){const e=r[n];e[1](),st.push(e,t)}if(n){for(let t=0;t<st.length;t+=2)st[t][0](st[t+1]);st.length=0}}}return{set:i,update:function(n){i(n(t))},subscribe:function(a,s=n){const c=[a,s];return r.push(c),1===r.length&&(o=e(i)||n),a(t),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}const lt={},ut={},ft={};function dt(){return N(lt)}function mt(){return N(ft)}function pt(t,n){const e=t.indexOf(n);~e&&function(t,n){t[n]=t[t.length-1],t.pop()}(t,e)}function ht(t){if("number"==typeof t){return new Float32Array([((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255])}return t}function gt(t,n=t){let e=0;for(let t=0;t<n.length;t+=1)e+=n[t]*n[t];const o=Math.sqrt(e);return t[0]=n[0]/o,t[1]=n[1]/o,t[2]=n[2]/o,t}function $t(t){const n=new Map;return(...e)=>{const o=JSON.stringify(e);return n.has(o)||n.set(o,t(...e)),n.get(o)}}var vt="undefined"!=typeof Float32Array?Float32Array:Array;function _t(){var t=new vt(16);return vt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function yt(t,n){var e=n[0],o=n[1],r=n[2],i=n[3],a=n[4],s=n[5],c=n[6],l=n[7],u=n[8],f=n[9],d=n[10],m=n[11],p=n[12],h=n[13],g=n[14],$=n[15],v=e*s-o*a,_=e*c-r*a,y=e*l-i*a,w=o*c-r*s,x=o*l-i*s,b=r*l-i*c,E=u*h-f*p,A=u*g-d*p,T=u*$-m*p,L=f*g-d*h,M=f*$-m*h,F=d*$-m*g,I=v*F-_*M+y*L+w*T-x*A+b*E;return I?(I=1/I,t[0]=(s*F-c*M+l*L)*I,t[1]=(r*M-o*F-i*L)*I,t[2]=(h*b-g*x+$*w)*I,t[3]=(d*x-f*b-m*w)*I,t[4]=(c*T-a*F-l*A)*I,t[5]=(e*F-r*T+i*A)*I,t[6]=(g*y-p*b-$*_)*I,t[7]=(u*b-d*y+m*_)*I,t[8]=(a*M-s*T+l*E)*I,t[9]=(o*T-e*M-i*E)*I,t[10]=(p*x-h*y+$*v)*I,t[11]=(f*y-u*x-m*v)*I,t[12]=(s*A-a*L-c*E)*I,t[13]=(e*L-o*A+r*E)*I,t[14]=(h*_-p*w-g*v)*I,t[15]=(u*w-f*_+d*v)*I,t):null}function wt(t,n,e){var o=n[0],r=n[1],i=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],m=n[10],p=n[11],h=n[12],g=n[13],$=n[14],v=n[15],_=e[0],y=e[1],w=e[2],x=e[3];return t[0]=_*o+y*s+w*f+x*h,t[1]=_*r+y*c+w*d+x*g,t[2]=_*i+y*l+w*m+x*$,t[3]=_*a+y*u+w*p+x*v,_=e[4],y=e[5],w=e[6],x=e[7],t[4]=_*o+y*s+w*f+x*h,t[5]=_*r+y*c+w*d+x*g,t[6]=_*i+y*l+w*m+x*$,t[7]=_*a+y*u+w*p+x*v,_=e[8],y=e[9],w=e[10],x=e[11],t[8]=_*o+y*s+w*f+x*h,t[9]=_*r+y*c+w*d+x*g,t[10]=_*i+y*l+w*m+x*$,t[11]=_*a+y*u+w*p+x*v,_=e[12],y=e[13],w=e[14],x=e[15],t[12]=_*o+y*s+w*f+x*h,t[13]=_*r+y*c+w*d+x*g,t[14]=_*i+y*l+w*m+x*$,t[15]=_*a+y*u+w*p+x*v,t}function xt(t,n,e){var o,r,i,a,s,c,l,u,f,d,m,p,h=e[0],g=e[1],$=e[2];return n===t?(t[12]=n[0]*h+n[4]*g+n[8]*$+n[12],t[13]=n[1]*h+n[5]*g+n[9]*$+n[13],t[14]=n[2]*h+n[6]*g+n[10]*$+n[14],t[15]=n[3]*h+n[7]*g+n[11]*$+n[15]):(o=n[0],r=n[1],i=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],m=n[10],p=n[11],t[0]=o,t[1]=r,t[2]=i,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=f,t[9]=d,t[10]=m,t[11]=p,t[12]=o*h+s*g+f*$+n[12],t[13]=r*h+c*g+d*$+n[13],t[14]=i*h+l*g+m*$+n[14],t[15]=a*h+u*g+p*$+n[15]),t}function bt(t,n,e,o){var r=n[0],i=n[1],a=n[2],s=n[3],c=r+r,l=i+i,u=a+a,f=r*c,d=r*l,m=r*u,p=i*l,h=i*u,g=a*u,$=s*c,v=s*l,_=s*u,y=o[0],w=o[1],x=o[2];return t[0]=(1-(p+g))*y,t[1]=(d+_)*y,t[2]=(m-v)*y,t[3]=0,t[4]=(d-_)*w,t[5]=(1-(f+g))*w,t[6]=(h+$)*w,t[7]=0,t[8]=(m+v)*x,t[9]=(h-$)*x,t[10]=(1-(f+p))*x,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Et(t,n,e,o){var r=n[0],i=n[1],a=n[2],s=o[0],c=o[1],l=o[2],u=r-e[0],f=i-e[1],d=a-e[2],m=u*u+f*f+d*d;m>0&&(u*=m=1/Math.sqrt(m),f*=m,d*=m);var p=c*d-l*f,h=l*u-s*d,g=s*f-c*u;return(m=p*p+h*h+g*g)>0&&(p*=m=1/Math.sqrt(m),h*=m,g*=m),t[0]=p,t[1]=h,t[2]=g,t[3]=0,t[4]=f*g-d*h,t[5]=d*p-u*g,t[6]=u*h-f*p,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=r,t[13]=i,t[14]=a,t[15]=1,t}function At(){var t=new vt(3);return vt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Tt(t,n,e){var o=new vt(3);return o[0]=t,o[1]=n,o[2]=e,o}function Lt(t,n){var e=n[0],o=n[1],r=n[2],i=e*e+o*o+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t}function Mt(t,n,e){var o=n[0],r=n[1],i=n[2],a=e[0],s=e[1],c=e[2];return t[0]=r*c-i*s,t[1]=i*a-o*c,t[2]=o*s-r*a,t}function Ft(t,n,e){var o=n[0],r=n[1],i=n[2],a=e[3]*o+e[7]*r+e[11]*i+e[15];return a=a||1,t[0]=(e[0]*o+e[4]*r+e[8]*i+e[12])/a,t[1]=(e[1]*o+e[5]*r+e[9]*i+e[13])/a,t[2]=(e[2]*o+e[6]*r+e[10]*i+e[14])/a,t}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var It,St=function(t){var n=t[0],e=t[1],o=t[2];return Math.hypot(n,e,o)};It=At();const Rt=t=>({width:8&t[0],height:16&t[0]}),Ot=t=>({width:t[3],height:t[4]});function Dt(t){let n;const e=t[37].default,o=u(e,t,t[36],Ot);return{c(){o&&o.c()},m(t,e){o&&o.m(t,e),n=!0},p(t,n){o&&o.p&&24&n[0]|32&n[1]&&o.p(f(e,t,t[36],Ot),d(e,t[36],n,Rt))},i(t){n||(Q(o,t),n=!0)},o(t){Z(o,t),n=!1},d(t){o&&o.d(t)}}}function Nt(t){let n,e,o,r,i,a=t[2]&&Dt(t);return{c(){n=_("div"),e=_("canvas"),o=w(),a&&a.c(),b(e,"class","svelte-6pzapg"),b(n,"class","container svelte-6pzapg"),B(()=>t[39].call(n))},m(s,c){g(s,n,c),h(n,e),t[38](e),h(n,o),a&&a.m(n,null),r=function(t,n){"static"===getComputedStyle(t).position&&(t.style.position="relative");const e=document.createElement("object");let o;return e.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),e.setAttribute("aria-hidden","true"),e.type="text/html",e.tabIndex=-1,e.onload=()=>{o=e.contentDocument.defaultView,o.addEventListener("resize",n)},/Trident/.test(navigator.userAgent)?(t.appendChild(e),e.data="about:blank"):(e.data="about:blank",t.appendChild(e)),{cancel:()=>{o&&o.removeEventListener&&o.removeEventListener("resize",n),t.removeChild(e)}}}(n,t[39].bind(n)),i=!0},p(t,e){t[2]?a?(a.p(t,e),Q(a,1)):(a=Dt(t),a.c(),Q(a,1),a.m(n,null)):a&&(J(),Z(a,1,1,()=>{a=null}),K())},i(t){i||(Q(a),i=!0)},o(t){Z(a),i=!1},d(e){e&&$(n),t[38](null),a&&a.d(),r.cancel()}}}function Ct(t){return{subscribe:ct(!1,n=>{if("undefined"!=typeof IntersectionObserver){const e=new IntersectionObserver(e=>{n(function(t){const n=t.getBoundingClientRect();return n.bottom>0&&n.right>0&&n.top<window.innerHeight&&n.left<window.innerWidth}(t))});return e.observe(t),()=>e.unobserve(t)}if("undefined"!=typeof window){function e(){const{top:e,bottom:o}=t.getBoundingClientRect();n(o>0&&e<window.innerHeight)}return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}}).subscribe}}function Pt(t,o,r){let i,a,s,u=n,f=()=>(u(),u=c(y,t=>r(19,s=t)),y);t.$$.on_destroy.push(()=>u());let{background:d=[1,1,1]}=o,{backgroundOpacity:h=1}=o,{fog:g}=o,{pixelRatio:$}=o;const v="fog"in o;let _,y=ct(!1);f();let w,x=!1,b=!1,E=()=>{},A={camera_matrix:ct(),view:ct(),projection:ct()};const T="undefined"!=typeof window?()=>{b||(b=!0,requestAnimationFrame(E))}:()=>{},L=ct(1);l(t,L,t=>r(3,i=t));const M=ct(1);l(t,M,t=>r(4,a=t));const F=function t(n,e){let o=0;const r=[],i=[],a=[],s={index:0,meshes:r,transparent_meshes:i,child_layers:a,needs_sort:!1,needs_transparency_sort:!0,add_mesh:(t,n)=>{n&&pt(t.transparent?r:i,t),t.transparent?(i.push(t),s.needs_transparency_sort=!0):r.push(t),R(()=>{pt(r,t),pt(i,t),e()})},add_child:(n=o++)=>{const r=t(n,e);return a.push(r),s.needs_sort=!0,R(()=>{pt(a,r),s.needs_sort=!0,e()}),r}};return s}(0,T),I={};let O=I;const N={ambient:[],directional:[],point:[]};function C(t){return n=>{t.push(n),T(),R(()=>{const e=t.indexOf(n);~e&&t.splice(e,1),T()})}}const z=new Map;let H=!0;const U={defines:["#define NUM_LIGHTS 2\n"+`#define USE_FOG ${v}\n`].join(""),add_camera:t=>{if(O&&O!==I)throw new Error("A scene can only have one camera");O=t,T(),A.camera_matrix.set(O.matrix),A.projection.set(O.projection),A.view.set(O.view),R(()=>{O=I,T()})},update_camera:t=>{A.camera_matrix.set(t.matrix),A.view.set(t.view),A.projection.set(t.projection),H=!0,T()},add_directional_light:C(N.directional),add_point_light:C(N.point),add_ambient_light:C(N.ambient),get_target:t=>(z.has(t)||z.set(t,ct(null)),z.get(t)),invalidate:T,...A,width:L,height:M};D(lt,U),D(ut,F);const B=((Y=_t())[0]=1,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=1,Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[10]=1,Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y);var Y;const q=ct(B);D(ft,{get_matrix_world:()=>B,ctm:{subscribe:q.subscribe}}),S(()=>{r(16,U.canvas=_,U),r(2,w=r(16,U.gl=_.getContext("webgl"),U)),f(r(1,y=Ct(_)));["OES_element_index_uint","OES_standard_derivatives"].forEach(t=>{if(!w.getExtension(t))throw new Error(`Unsupported extension: ${t}`)}),E=t=>{if(!O)return;if(X){const t=$||window.devicePixelRatio||1;r(0,_.width=i*t,_),r(0,_.height=a*t,_),w.viewport(0,0,i*t,a*t),X=!1}if(b=!1,!s&&!t)return void r(11,x=!0);r(11,x=!1),w.clearColor(...V,h),w.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT),w.enable(w.CULL_FACE),w.enable(w.BLEND);const n=N.ambient.reduce((t,{color:n,intensity:e})=>[Math.min(t[0]+n[0]*e,1),Math.min(t[1]+n[1]*e,1),Math.min(t[2]+n[2]*e,1)],new Float32Array([0,0,0]));let e,o={[w.DEPTH_TEST]:null,[w.CULL_FACE]:null};const c=(t,n)=>{o[t]!==n&&(n?w.enable(t):w.disable(t),o[t]=n)};function l({model:t,model_inverse_transpose:o,geometry:r,material:i,depthTest:a,doubleSided:s}){if(i){if(c(w.DEPTH_TEST,!1!==a),c(w.CULL_FACE,!0!==s),w.blendFuncSeparate(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA,w.SRC_ALPHA,w.ONE),i.program!==e){if(e=i.program,w.useProgram(i.program),w.uniform3fv(i.uniform_locations.AMBIENT_LIGHT,n),v&&(w.uniform3fv(i.uniform_locations.FOG_COLOR,V),w.uniform1f(i.uniform_locations.FOG_DENSITY,g)),i.uniform_locations.DIRECTIONAL_LIGHTS)for(let t=0;t<8;t+=1){const n=N.directional[t];if(!n)break;w.uniform3fv(i.uniform_locations.DIRECTIONAL_LIGHTS[t].direction,n.direction),w.uniform3fv(i.uniform_locations.DIRECTIONAL_LIGHTS[t].color,n.color),w.uniform1f(i.uniform_locations.DIRECTIONAL_LIGHTS[t].intensity,n.intensity)}if(i.uniform_locations.POINT_LIGHTS)for(let t=0;t<8;t+=1){const n=N.point[t];if(!n)break;w.uniform3fv(i.uniform_locations.POINT_LIGHTS[t].location,n.location),w.uniform3fv(i.uniform_locations.POINT_LIGHTS[t].color,n.color),w.uniform1f(i.uniform_locations.POINT_LIGHTS[t].intensity,n.intensity)}w.uniform3fv(i.uniform_locations.CAMERA_WORLD_POSITION,O.world_position),w.uniformMatrix4fv(i.uniform_locations.VIEW,!1,O.view),w.uniformMatrix4fv(i.uniform_locations.PROJECTION,!1,O.projection)}if(w.uniformMatrix4fv(i.uniform_locations.MODEL,!1,t),w.uniformMatrix4fv(i.uniform_locations.MODEL_INVERSE_TRANSPOSE,!1,o),i.apply_uniforms(w),r.set_attributes(w),r.index)w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,r.buffers.__index),w.drawElements(w[r.primitive],r.index.length,w.UNSIGNED_INT,0);else{const t=w[r.primitive];w.drawArrays(t,0,r.count)}}}!function t(n){n.needs_sort&&(n.child_layers.sort((t,n)=>t.index-n.index),n.needs_sort=!1),w.depthMask(!0),w.clearDepth(1),w.clear(w.DEPTH_BUFFER_BIT);for(let t=0;t<n.meshes.length;t+=1)l(n.meshes[t]);w.depthMask(!1),(H||n.needs_transparency_sort)&&(j(n.transparent_meshes),n.needs_transparency_sort=!1);for(let t=0;t<n.transparent_meshes.length;t+=1)l(n.transparent_meshes[t]);for(let e=0;e<n.child_layers.length;e+=1)t(n.child_layers[e])}(F),H=!1};const t=setTimeout(()=>{p(L,i=_.clientWidth),p(M,a=_.clientHeight)});return(k(),G).then(()=>E(!0)),()=>{w.getExtension("WEBGL_lose_context").loseContext(),clearTimeout(t)}});const j=t=>{if(t.length<2)return;const n=new Map,e=new Float32Array(16);t.forEach(t=>{const o=wt(e,O.view,t.model)[14];n.set(t,o)}),t.sort((t,e)=>n.get(t)-n.get(e))};let X=!0;const W=()=>{X=!0,T()};let V,{$$slots:J={},$$scope:K}=o;return t.$set=t=>{r(35,o=e(e({},o),m(t))),"background"in t&&r(7,d=t.background),"backgroundOpacity"in t&&r(8,h=t.backgroundOpacity),"fog"in t&&r(9,g=t.fog),"pixelRatio"in t&&r(10,$=t.pixelRatio),"$$scope"in t&&r(36,K=t.$$scope)},t.$$.update=()=>{128&t.$$.dirty[0]&&(V=ht(d)),24&t.$$.dirty[0]&&W(),66432&t.$$.dirty[0]&&U.invalidate(),591872&t.$$.dirty[0]&&s&&x&&U.invalidate()},o=m(o),[_,y,w,i,a,L,M,d,h,g,$,x,b,E,O,H,U,X,V,s,v,void 0,void 0,A,T,F,I,[],N,C,z,B,q,j,W,o,K,J,function(t){P[t?"unshift":"push"](()=>{r(0,_=t)})},function(){i=this.clientWidth,L.set(i),a=this.clientHeight,M.set(a)}]}class zt extends rt{constructor(t){super(),ot(this,t,Pt,Nt,s,{background:7,backgroundOpacity:8,fog:9,pixelRatio:10},[-1,-1])}}!function(){var t,n=(t=new vt(4),vt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function Ht(){var t=new vt(4);return vt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Gt(t,n,e,o){var r,i,a,s,c,l=n[0],u=n[1],f=n[2],d=n[3],m=e[0],p=e[1],h=e[2],g=e[3];return(i=l*m+u*p+f*h+d*g)<0&&(i=-i,m=-m,p=-p,h=-h,g=-g),1-i>1e-6?(r=Math.acos(i),a=Math.sin(r),s=Math.sin((1-o)*r)/a,c=Math.sin(o*r)/a):(s=1-o,c=o),t[0]=s*l+c*m,t[1]=s*u+c*p,t[2]=s*f+c*h,t[3]=s*d+c*g,t}function Ut(t,n,e,o){var r=.5*Math.PI/180;n*=r,e*=r,o*=r;var i=Math.sin(n),a=Math.cos(n),s=Math.sin(e),c=Math.cos(e),l=Math.sin(o),u=Math.cos(o);return t[0]=i*c*u-a*s*l,t[1]=a*s*u+i*c*l,t[2]=a*c*l-i*s*u,t[3]=a*c*u+i*s*l,t}var kt,Bt,Yt,qt,jt,Xt,Wt,Vt=function(t,n){var e=n[0],o=n[1],r=n[2],i=n[3],a=e*e+o*o+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e*a,t[1]=o*a,t[2]=r*a,t[3]=i*a,t};kt=At(),Bt=Tt(1,0,0),Yt=Tt(0,1,0),qt=Ht(),jt=Ht(),Xt=new vt(9),vt!=Float32Array&&(Xt[1]=0,Xt[2]=0,Xt[3]=0,Xt[5]=0,Xt[6]=0,Xt[7]=0),Xt[0]=1,Xt[4]=1,Xt[8]=1,Wt=Xt;function Jt(t){let n;const e=t[18].default,o=u(e,t,t[17],null);return{c(){o&&o.c()},m(t,e){o&&o.m(t,e),n=!0},p(t,[n]){o&&o.p&&131072&n&&o.p(f(e,t,t[17],null),d(e,t[17],n,null))},i(t){n||(Q(o,t),n=!0)},o(t){Z(o,t),n=!1},d(t){o&&o.d(t)}}}function Kt(t,e,o){let r,i,a,s=n;t.$$.on_destroy.push(()=>s());let{location:u=[0,0,0]}=e,{lookAt:f}=e,{up:d=[0,1,0]}=e,{rotation:m=[0,0,0]}=e,{scale:h=1}=e;const g=dt(),$=mt(),{ctm:v}=$;l(t,v,t=>o(12,i=t));const _=ct(null);l(t,_,t=>o(13,a=t));let y=_t(),w=Ht();const x=new Float32Array(y.buffer,48,3);!function(t){D(ft,t)}({ctm:_});let b,E,{$$slots:A={},$$scope:T}=e;return t.$set=t=>{"location"in t&&o(3,u=t.location),"lookAt"in t&&o(4,f=t.lookAt),"up"in t&&o(5,d=t.up),"rotation"in t&&o(6,m=t.rotation),"scale"in t&&o(7,h=t.scale),"$$scope"in t&&o(17,T=t.$$scope)},t.$$.update=()=>{128&t.$$.dirty&&o(10,b="number"==typeof h?[h,h,h]:h),16&t.$$.dirty&&(o(0,E=f?g.get_target(f):ct(null)),s(),s=c(E,t=>o(11,r=t))),16232&t.$$.dirty&&(r?(xt(y,i,u),Et(y,x,r,d),function(t,n,e){var o=e[0],r=e[1],i=e[2];t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t[3]=n[3]*o,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=n[11]*i,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]}(y,y,b),p(_,a=y)):(o(9,w=Ut(w||Ht(),...m)),o(8,y=bt(y,w,u,b)),p(_,a=wt(a||_t(),i,y)))),8192&t.$$.dirty&&g.invalidate()},[E,v,_,u,f,d,m,h,y,w,b,r,i,a,g,$,x,T,A]}class Qt extends rt{constructor(t){super(),ot(this,t,Kt,Jt,s,{location:3,lookAt:4,up:5,rotation:6,scale:7})}}const Zt=new Map,tn={5126:(t,n,e)=>t.uniform1f(n,e),35664:(t,n,e)=>t.uniform2fv(n,e),35665:(t,n,e)=>t.uniform3fv(n,e),35666:(t,n,e)=>t.uniform4fv(n,e),35674:(t,n,e)=>t.uniformMatrix2fv(n,!1,e),35675:(t,n,e)=>t.uniformMatrix3fv(n,!1,e),35676:(t,n,e)=>t.uniformMatrix4fv(n,!1,e),35678:(t,n,e)=>{t.activeTexture(t[`TEXTURE${e.index}`]),t.bindTexture(t.TEXTURE_2D,e.texture),t.uniform1i(n,e.index)}};function nn(t,n,e){Zt.has(t)||Zt.set(t,new Map);const o=Zt.get(t),r=n+e;if(!o.has(r)){const i=function(t,n,e){const o=t.createProgram();if(t.attachShader(o,rn(t,t.VERTEX_SHADER,n,"vertex")),t.attachShader(o,rn(t,t.FRAGMENT_SHADER,e,"fragment")),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(o)),new Error(`Failed to compile program:\n${t.getProgramInfoLog(o)}`);return o}(t,n,e),a=function(t,n){const e=[],o=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let r=0;r<o;r+=1){let{size:o,type:i,name:a}=t.getActiveUniform(n,r);const s=t.getUniformLocation(n,a),c=tn[i];if(!c)throw new Error(`not implemented ${i} (${a})`);e.push({size:o,type:i,name:a,setter:c,loc:s})}return e}(t,i),s=function(t,n){const e=[],o=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(let r=0;r<o;r+=1){let{size:o,type:i,name:a}=t.getActiveAttrib(n,r);a=a.replace("[0]","");const s=t.getAttribLocation(n,a);e.push({size:o,type:i,name:a,loc:s})}return e}(t,i);o.set(r,{program:i,uniforms:a,attributes:s})}return o.get(r)}function en(t,n=4){for(t=String(t);t.length<n;)t=` ${t}`;return t}function on(t,n){let e="";for(;n--;)e+=t;return e}function rn(t,n,e,o){const r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return r;const i=t.getShaderInfoLog(r),a=/ERROR: (\d+):(\d+): (.+)/.exec(i);if(a){const t=+a[1],n=+a[2]-1;console.log("%c"+a[3],"font-weight: bold; color: red");const r=e.split("\n");for(let e=0;e<r.length;e+=1){if(Math.abs(n-e)>5)continue;const o=r[e].replace(/^\t+/gm,t=>on(" ",4*t.length)),i=/^\s+/.exec(o),a=`${en(e)}: ${o}`;e===n?(console.log("%c"+a,"font-weight: bold; color: red"),console.log("%c"+(i&&i[0]||"")+on(" ",t+6)+"^","color: red")):console.log(a)}throw new Error(`Failed to compile ${o} shader`)}throw new Error(`Failed to compile ${o} shader:\n${i}`)}class an{constructor(t,n,e,o){this.scene=t;const r=t.gl;this.gl=r;const{program:i,uniforms:a,attributes:s}=nn(r,t.defines+o+"\n\n\nprecision highp float;\nuniform mat4 MODEL;\nuniform mat4 PROJECTION;\nuniform mat4 VIEW;\nuniform mat4 MODEL_INVERSE_TRANSPOSE;\nuniform vec3 CAMERA_WORLD_POSITION;\nstruct PointLight {\n\tvec3 location;\n\tvec3 color;\n\tfloat intensity;\n};\nuniform PointLight POINT_LIGHTS[NUM_LIGHTS];\n\n\n"+n,t.defines+o+"\n\n#extension GL_OES_standard_derivatives : enable\nprecision highp float;\nstruct DirectionalLight {\n\tvec3 direction;\n\tvec3 color;\n\tfloat intensity;\n};\nstruct PointLight {\n\tvec3 location;\n\tvec3 color;\n\tfloat intensity;\n};\nuniform vec3 AMBIENT_LIGHT;\nuniform DirectionalLight DIRECTIONAL_LIGHTS[NUM_LIGHTS];\nuniform PointLight POINT_LIGHTS[NUM_LIGHTS];\n\n\n"+e);this.program=i,this.uniforms=a,this.attributes=s,this.uniform_locations={},this.uniforms.forEach(t=>{!function(t,n,e){const o=n.replace(/\]$/,"").split(/\[|\]\.|\./);for(;o.length>1;){const n=o.shift(),e=o[0];t[n]||(t[n]=/^\d+$/.test(e)?[]:{}),t=t[n]}t[o[0]]=e}(this.uniform_locations,t.name,r.getUniformLocation(this.program,t.name))}),this.attribute_locations={},this.attributes.forEach(t=>{this.attribute_locations[t.name]=r.getAttribLocation(this.program,t.name)}),this.raw_values={},this.values={}}set_uniforms(t){let n=0;this.uniforms.forEach(({name:e,type:o,loc:r,setter:i,processor:a})=>{if(e in t){let r=t[e];if(r===this.raw_values[e])return;if(35678===o)return void(this.values[e]={texture:r.instantiate(this.scene)._,index:n++});"number"==typeof r&&5126!==o&&(r=ht(r)),this.values[e]=r}}),this.raw_values=t}apply_uniforms(t,n){this.uniforms.forEach(n=>{n.name in this.values&&n.setter(t,n.loc,this.values[n.name])})}destroy(){}}var sn="attribute vec3 position;\nattribute vec3 normal;\nvarying vec3 v_normal;\n#if defined(has_colormap) || defined(has_specularitymap) || defined(has_normalmap) || defined(has_bumpmap)\n#define has_textures true\n#endif\n#ifdef has_textures\nattribute vec2 uv;\nvarying vec2 v_uv;\n#endif\n#if defined(has_normalmap) || defined(has_bumpmap)\nvarying vec3 v_view_position;\n#endif\nvarying vec3 v_surface_to_light[NUM_LIGHTS];\n#ifdef has_specularity\nvarying vec3 v_surface_to_view[NUM_LIGHTS];\n#endif\n#ifdef USE_FOG\nvarying float v_fog_depth;\n#endif\nvoid main() {\n\tvec4 pos = vec4(position, 1.0);\n\tvec4 model_view_pos = VIEW * MODEL * pos;\n\tv_normal = (MODEL_INVERSE_TRANSPOSE * vec4(normal, 0.0)).xyz;\n\t#ifdef has_textures\n\tv_uv = uv;\n\t#endif\n\t#if defined(has_normalmap) || defined(has_bumpmap)\n\tv_view_position = model_view_pos.xyz;\n\t#endif\n\t#ifdef USE_FOG\n\tv_fog_depth = -model_view_pos.z;\n\t#endif\n\tfor (int i = 0; i < NUM_LIGHTS; i += 1) {\n\t\tPointLight light = POINT_LIGHTS[i];\n\t\tvec3 surface_world_position = (MODEL * pos).xyz;\n\t\tv_surface_to_light[i] = light.location - surface_world_position;\n\t\t#ifdef has_specularity\n\t\tv_surface_to_view[i] = CAMERA_WORLD_POSITION - surface_world_position;\n\t\t#endif\n\t}\n\tgl_Position = PROJECTION * model_view_pos;\n}",cn="#if defined(has_colormap) || defined(has_specularitymap) || defined(has_normalmap) || defined(has_bumpmap) || defined(has_emissivemap)\n#define has_textures true\n#endif\n#ifdef has_textures\nvarying vec2 v_uv;\n#endif\n#ifdef has_specularity\nuniform float specularity;\n#endif\n#ifdef has_colormap\nuniform sampler2D colormap;\n#endif\n#ifdef has_emissivemap\nuniform sampler2D emissivemap;\n#endif\n#ifdef has_specularitymap\nuniform sampler2D specularitymap;\n#endif\n#ifdef has_bumpmap\nuniform sampler2D bumpmap;\nvec2 dHdxy_fwd() {\n\tvec2 dSTdx = dFdx(v_uv);\n\tvec2 dSTdy = dFdy(v_uv);\n\tfloat Hll = texture2D(bumpmap, v_uv).x;\n\tfloat dBx = texture2D(bumpmap, v_uv + dSTdx).x - Hll;\n\tfloat dBy = texture2D(bumpmap, v_uv + dSTdy).x - Hll;\n\t#ifdef has_bumpscale\n\tHll *= bumpscale;\n\tdBx *= bumpscale;\n\tdBy *= bumpscale;\n\t#endif\n\treturn vec2(dBx, dBy);\n}\nvec3 perturbNormalArb(vec3 surf_pos, vec3 surface_normal, vec2 dHdxy) {\n\tvec3 vSigmaX = vec3(dFdx(surf_pos.x), dFdx(surf_pos.y), dFdx(surf_pos.z));\n\tvec3 vSigmaY = vec3(dFdy(surf_pos.x), dFdy(surf_pos.y), dFdy(surf_pos.z));\n\tvec3 vN = surface_normal;\n\tvec3 R1 = cross(vSigmaY, vN);\n\tvec3 R2 = cross(vN, vSigmaX);\n\tfloat fDet = dot(vSigmaX, R1);\n\tfDet *= (float(gl_FrontFacing) * 2.0 - 1.0);\n\tvec3 vGrad = sign(fDet) * (dHdxy.x * R1 + dHdxy.y * R2);\n\treturn normalize(abs(fDet) * surface_normal - vGrad);\n}\n#endif\n#ifdef has_bumpscale\nuniform float bumpscale;\n#endif\n#ifdef has_normalmap\nuniform sampler2D normalmap;\nvec3 perturbNormal2Arb(vec3 eye_pos, vec3 surface_normal) {\n\tvec3 q0 = vec3(dFdx(eye_pos.x), dFdx(eye_pos.y), dFdx(eye_pos.z));\n\tvec3 q1 = vec3(dFdy(eye_pos.x), dFdy(eye_pos.y), dFdy(eye_pos.z));\n\tvec2 st0 = dFdx(v_uv.st);\n\tvec2 st1 = dFdy(v_uv.st);\n\tif (length(q0) == 0.0) {\n\t\treturn surface_normal;\n\t}\n\tfloat scale = sign(st1.t * st0.s - st0.t * st1.s);\n\tvec3 S = normalize((q0 * st1.t - q1 * st0.t) * scale);\n\tvec3 T = normalize((-q0 * st1.s + q1 * st0.s) * scale);\n\tvec3 N = normalize(surface_normal);\n\tmat3 tsn = mat3(S, T, N);\n\tvec3 mapN = texture2D(normalmap, v_uv).xyz * 2.0 - 1.0;\n\tmapN.xy *= (float(gl_FrontFacing) * 2.0 - 1.0);\n\treturn normalize(tsn * mapN);\n}\n#endif\n#ifdef has_color\nuniform vec3 color;\n#endif\n#ifdef has_emissive\nuniform vec3 emissive;\n#endif\n#ifdef has_alpha\nuniform float alpha;\n#endif\n#ifdef USE_FOG\nuniform vec3 FOG_COLOR;\nuniform float FOG_DENSITY;\nvarying float v_fog_depth;\n#endif\nvarying vec3 v_normal;\n#if defined(has_normalmap) || defined(has_bumpmap)\nvarying vec3 v_view_position;\n#endif\nvarying vec3 v_surface_to_light[NUM_LIGHTS];\nvarying vec3 v_surface_to_view[NUM_LIGHTS];\nvoid main () {\n\tvec3 normal = normalize(v_normal);\n\t#ifdef has_bumpmap\n\t\tnormal = perturbNormalArb(-v_view_position, normal, dHdxy_fwd());\n\t#elif defined(has_normalmap)\n\t\tnormal = perturbNormal2Arb(-v_view_position, normal);\n\t#endif\n\tvec3 lighting = vec3(0.0);\n\tvec3 spec_amount = vec3(0.0);\n\tfor (int i = 0; i < NUM_LIGHTS; i += 1) {\n\t\tDirectionalLight light = DIRECTIONAL_LIGHTS[i];\n\t\tfloat multiplier = clamp(dot(normal, -light.direction), 0.0, 1.0);\n\t\tlighting += multiplier * light.color * light.intensity;\n\t}\n\tfor (int i = 0; i < NUM_LIGHTS; i += 1) {\n\t\tPointLight light = POINT_LIGHTS[i];\n\t\tvec3 surface_to_light = normalize(v_surface_to_light[i]);\n\t\tfloat multiplier = clamp(dot(normal, surface_to_light), 0.0, 1.0);\t\tlighting += multiplier * light.color * light.intensity;\n\t\t#ifdef has_specularity\n\t\t\tvec3 surface_to_view = normalize(v_surface_to_view[i]);\n\t\t\tvec3 half_vector = normalize(surface_to_light + surface_to_view);\n\t\t\tfloat spec = clamp(dot(normal, half_vector), 0.0, 1.0);\n\t\t\t#ifdef has_specularitymap\n\t\t\tspec *= texture2D(specularitymap, v_uv).r;\n\t\t\t#endif\n\t\t\tspec_amount += specularity * spec * light.color * light.intensity;\n\t\t#endif\n\t}\n\t#if defined(has_colormap)\n\tgl_FragColor = texture2D(colormap, v_uv);\n\t#elif defined(has_color)\n\tgl_FragColor = vec4(color, 1.0);\n\t#endif\n\t#ifdef has_alpha\n\tgl_FragColor.a *= alpha;\n\t#endif\n\tgl_FragColor.rgb *= mix(AMBIENT_LIGHT, vec3(1.0, 1.0, 1.0), lighting);\n\tgl_FragColor.rgb += spec_amount;\n\t#if defined(has_emissivemap)\n\tgl_FragColor.rgb += texture2D(emissivemap, v_uv);\n\t#elif defined(has_emissive)\n\tgl_FragColor.rgb += emissive;\n\t#endif\n\t#ifdef USE_FOG\n\tgl_FragColor.rgb = mix(\n\t\tgl_FragColor.rgb,\n\t\tFOG_COLOR,\n\t\t1.0 - exp(-FOG_DENSITY * FOG_DENSITY * v_fog_depth * v_fog_depth)\n\t);\n\t#endif\n}";function ln(t,n,e){let o,{location:r=[0,0,0]}=n,{rotation:i=[0,0,0]}=n,{scale:a=1}=n,{geometry:s}=n,{vert:c=sn}=n,{frag:u=cn}=n,{uniforms:f={}}=n,{depthTest:d}=n,{doubleSided:m}=n,{transparent:p=!1}=n;const h=dt(),g=N(ut),{ctm:$}=mt();l(t,$,t=>e(18,o=t));_t();const v=_t(),_={};let y=!0;let w,x,b,E,A,T,L;return R(()=>{_.material&&_.material.destroy()}),t.$set=t=>{"location"in t&&e(1,r=t.location),"rotation"in t&&e(2,i=t.rotation),"scale"in t&&e(3,a=t.scale),"geometry"in t&&e(4,s=t.geometry),"vert"in t&&e(5,c=t.vert),"frag"in t&&e(6,u=t.frag),"uniforms"in t&&e(7,f=t.uniforms),"depthTest"in t&&e(8,d=t.depthTest),"doubleSided"in t&&e(9,m=t.doubleSided),"transparent"in t&&e(10,p=t.transparent)},t.$$.update=()=>{8&t.$$.dirty&&e(14,w="number"==typeof a?[a,a,a]:a),32772&t.$$.dirty&&e(15,x=Ut(x||Ht(),...i)),114690&t.$$.dirty&&e(16,b=bt(b||_t(),x,r,w)),458752&t.$$.dirty&&e(17,E=wt(E||_t(),o,b)),128&t.$$.dirty&&e(19,A=Object.keys(f).filter(t=>null!=f[t]).map(t=>`#define has_${t} true\n`).join("")),524384&t.$$.dirty&&e(20,T=new an(h,c,u,A)),1048704&t.$$.dirty&&T.set_uniforms(f),1048592&t.$$.dirty&&e(21,L=s.instantiate(h,T.program)),131072&t.$$.dirty&&(_.model=E),131072&t.$$.dirty&&(_.model_inverse_transpose=(yt(v,E),function(t,n){if(t===n){var e=n[1],o=n[2],r=n[3],i=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=o,t[9]=i,t[11]=n[14],t[12]=r,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}(v,v))),1048576&t.$$.dirty&&(_.material=T),2097152&t.$$.dirty&&(_.geometry=L),256&t.$$.dirty&&(_.depthTest=d),512&t.$$.dirty&&(_.doubleSided=m),1024&t.$$.dirty&&(_.transparent=p),1024&t.$$.dirty&&(g.add_mesh(_,y),y=!1),132096&t.$$.dirty&&p&&(g.needs_transparency_sort=!0),2228352&t.$$.dirty&&h.invalidate()},[$,r,i,a,s,c,u,f,d,m,p]}class un extends rt{constructor(t){super(),ot(this,t,ln,null,s,{location:1,rotation:2,scale:3,geometry:4,vert:5,frag:6,uniforms:7,depthTest:8,doubleSided:9,transparent:10})}}function fn(t,n,e){let o,{id:r}=n,{location:i=[0,0,0]}=n;const{get_target:a}=dt(),{ctm:s}=mt();l(t,s,t=>e(8,o=t));let c=_t();const u=new Float32Array(c.buffer,48,3),f=new Float32Array(3);let d,m,p;return t.$set=t=>{"id"in t&&e(1,r=t.id),"location"in t&&e(2,i=t.location)},t.$$.update=()=>{4&t.$$.dirty&&e(5,d=i[0]),4&t.$$.dirty&&e(6,m=i[1]),4&t.$$.dirty&&e(7,p=i[2]),224&t.$$.dirty&&(e(4,f[0]=d,f),e(4,f[1]=m,f),e(4,f[2]=p,f)),280&t.$$.dirty&&e(3,c=xt(c,o,f)),10&t.$$.dirty&&a(r).set(u)},[s,r,i]}class dn extends rt{constructor(t){super(),ot(this,t,fn,null,s,{id:1,location:2})}}function mn(t,n,e){let{color:o=[1,1,1]}=n,{intensity:r=.2}=n;const i=dt(),a={};return i.add_ambient_light(a),t.$set=t=>{"color"in t&&e(0,o=t.color),"intensity"in t&&e(1,r=t.intensity)},t.$$.update=()=>{1&t.$$.dirty&&e(2,a.color=ht(o),a),2&t.$$.dirty&&e(2,a.intensity=r,a),4&t.$$.dirty&&i.invalidate()},[o,r]}class pn extends rt{constructor(t){super(),ot(this,t,mn,null,s,{color:0,intensity:1})}}function hn(t,n,e){let o,{direction:r=new Float32Array([-1,-1,-1])}=n,{color:i=new Float32Array([1,1,1])}=n,{intensity:a=1}=n;const s=dt(),{ctm:c}=mt();l(t,c,t=>e(6,o=t));const u={};let f;return s.add_directional_light(u),t.$set=t=>{"direction"in t&&e(1,r=t.direction),"color"in t&&e(2,i=t.color),"intensity"in t&&e(3,a=t.intensity)},t.$$.update=()=>{98&t.$$.dirty&&e(5,f=Ft(f||At(),r,o)),48&t.$$.dirty&&e(4,u.direction=Lt(u.direction||At(),f),u),4&t.$$.dirty&&e(4,u.color=ht(i),u),8&t.$$.dirty&&e(4,u.intensity=a,u),16&t.$$.dirty&&s.invalidate()},[c,r,i,a]}class gn extends rt{constructor(t){super(),ot(this,t,hn,null,s,{direction:1,color:2,intensity:3})}}function $n(t,n,e){let o,{location:r=new Float32Array([-1,-1,-1])}=n,{color:i=new Float32Array([1,1,1])}=n,{intensity:a=1}=n;const s=dt(),{ctm:c}=mt();l(t,c,t=>e(5,o=t));let u={location:At(),color:null,intensity:null};return s.add_point_light(u),t.$set=t=>{"location"in t&&e(1,r=t.location),"color"in t&&e(2,i=t.color),"intensity"in t&&e(3,a=t.intensity)},t.$$.update=()=>{50&t.$$.dirty&&e(4,u.location=Ft(u.location,r,o),u),4&t.$$.dirty&&e(4,u.color=ht(i),u),8&t.$$.dirty&&e(4,u.intensity=a,u),16&t.$$.dirty&&s.invalidate()},[c,r,i,a]}class vn extends rt{constructor(t){super(),ot(this,t,$n,null,s,{location:1,color:2,intensity:3})}}function _n(t,n,e){return t<n?n:t>e?e:t}function yn(t){let n,e=!1;function o(){t(n),e=!1}return function(t){e||(requestAnimationFrame(o),e=!0),n=t}}const wn=t=>({location:1&t,target:2&t}),xn=t=>({location:t[0],target:t[1]});function bn(t){let n;const e=t[17].default,o=u(e,t,t[16],xn);return{c(){o&&o.c()},m(t,e){o&&o.m(t,e),n=!0},p(t,[n]){o&&o.p&&65539&n&&o.p(f(e,t,t[16],xn),d(e,t[16],n,wn))},i(t){n||(Q(o,t),n=!0)},o(t){Z(o,t),n=!1},d(t){o&&o.d(t)}}}function En(t,n){return Math.sqrt(t*t+n*n)}function An(t,n,e){const o=dt();let{location:r=new Float32Array([1,3,5])}=n,{target:i=new Float32Array([0,1,0])}=n,{minDistance:a=0}=n,{maxDistance:s=1/0}=n,{minPolarAngle:c=0}=n,{maxPolarAngle:l=Math.PI}=n;function u(t,n){const o=r[0]-i[0],a=r[1]-i[1],s=r[2]-i[2],u=Math.sqrt(o*o+a*a+s*s);let f=Math.atan2(o,s);f-=t;let d=Math.acos(_n(a/u,-1,1));d=_n(d-n,1e-6,Math.PI-1e-6),d=_n(d,c,l);const m=Math.sin(d)*u,p=m*Math.sin(f),h=Math.cos(d)*u,g=m*Math.cos(f);e(0,r[0]=i[0]+p,r),e(0,r[1]=i[1]+h,r),e(0,r[2]=i[2]+g,r)}function f(t,n){const o=r[0]-i[0],a=(r[1],i[1],r[2]-i[2]);{const t=gt([o,a]),s=-t[0]*n,c=-t[1]*n;e(0,r[0]+=s,r),e(0,r[2]+=c,r),e(1,i[0]+=s,i),e(1,i[2]+=c,i)}{const n=gt([-a,o]),s=n[0]*t,c=n[1]*t;e(0,r[0]+=s,r),e(0,r[2]+=c,r),e(1,i[0]+=s,i),e(1,i[2]+=c,i)}}function d(t){let n=r[0]-i[0],o=r[1]-i[1],c=r[2]-i[2];const l=Math.sqrt(n*n+o*o+c*c);n/=t=_n(t,l/s,a?l/a:1/0),o/=t,c/=t,e(0,r[0]=i[0]+n,r),e(0,r[1]=i[1]+o,r),e(0,r[2]=i[2]+c,r)}function m(t){let n=t.clientX,e=t.clientY;const o=yn(t=>{const o=t.clientX,r=t.clientY,i=o-n,a=r-e;t.shiftKey||2===t.which?f(.01*i,.01*a):u(.005*i,.005*a),n=o,e=r});window.addEventListener("mousemove",o),window.addEventListener("mouseup",(function t(n){window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",t)}))}const p=yn(t=>{d(Math.pow(1.004,t.wheelDeltaY))});function h(t){t.preventDefault(),p(t)}function g(t){t.preventDefault();const n=t.touches[0],e=n.identifier;let o=n.clientX,r=n.clientY;const i=yn(t=>{if(t.touches.length>1)return;const n=t.touches[0];n.identifier===e&&(u(.003*(n.clientX-o),.003*(n.clientY-r)),o=n.clientX,r=n.clientY)});window.addEventListener("touchmove",i),window.addEventListener("touchend",(function t(n){let o=n.changedTouches.length;for(;o--;){if(n.changedTouches[o].identifier===e)return window.removeEventListener("touchmove",i),void window.removeEventListener("touchend",t)}}))}function $(t){t.preventDefault();const n=t.touches[0],e=t.touches[1],o=n.identifier,r=e.identifier;let i=(n.clientX+e.clientX)/2,a=(n.clientY+e.clientY)/2,s=En(e.clientX-n.clientX,e.clientY-n.clientY);const c=yn(t=>{if(2!==t.touches.length)return void alert(`${t.touches.length} touches`);const n=t.touches[0],e=t.touches[1];if(n.identifier!==o&&n.identifier!==r)return;if(e.identifier!==o&&e.identifier!==r)return;const c=(n.clientX+e.clientX)/2,l=(n.clientY+e.clientY)/2,u=En(e.clientX-n.clientX,e.clientY-n.clientY);f(.01*(c-i),.01*(l-a)),d(u/s),i=c,a=l,s=u});window.addEventListener("touchmove",c),window.addEventListener("touchend",(function t(n){let e=n.changedTouches.length;for(;e--;){const i=n.changedTouches[e];if(i.identifier===o||i.identifier===r)return window.removeEventListener("touchmove",c),void window.removeEventListener("touchend",t)}}))}function v(t){1===t.touches.length&&g(t),2===t.touches.length&&$(t)}o.canvas.addEventListener("mousedown",m),o.canvas.addEventListener("mousewheel",h),o.canvas.addEventListener("touchstart",v),R(()=>{o.canvas.removeEventListener("mousedown",m),o.canvas.removeEventListener("mousewheel",h),o.canvas.removeEventListener("touchstart",v)});let{$$slots:_={},$$scope:y}=n;return t.$set=t=>{"location"in t&&e(0,r=t.location),"target"in t&&e(1,i=t.target),"minDistance"in t&&e(2,a=t.minDistance),"maxDistance"in t&&e(3,s=t.maxDistance),"minPolarAngle"in t&&e(4,c=t.minPolarAngle),"maxPolarAngle"in t&&e(5,l=t.maxPolarAngle),"$$scope"in t&&e(16,y=t.$$scope)},[r,i,a,s,c,l,o,u,f,d,m,p,h,g,$,v,y,_]}class Tn extends rt{constructor(t){super(),ot(this,t,An,bn,s,{location:0,target:1,minDistance:2,maxDistance:3,minPolarAngle:4,maxPolarAngle:5})}}function Ln(t,e,o){let r,i,a,s,u=n,f=()=>(u(),u=c(L,t=>o(12,i=t)),L);t.$$.on_destroy.push(()=>u());let{location:d=[0,0,0]}=e,{lookAt:m=null}=e,{up:p=[0,1,0]}=e,{fov:h=60}=e,{near:g=1}=e,{far:$=2e4}=e;const{add_camera:v,update_camera:_,width:y,height:w,get_target:x}=dt();l(t,y,t=>o(13,a=t)),l(t,w,t=>o(14,s=t));const{ctm:b}=mt();l(t,b,t=>o(11,r=t));const E=_t(),A=new Float32Array(E.buffer,48,3);let T={matrix:E,world_position:A,view:_t(),projection:_t()},L=ct(null);return f(),v(T),t.$set=t=>{"location"in t&&o(4,d=t.location),"lookAt"in t&&o(5,m=t.lookAt),"up"in t&&o(6,p=t.up),"fov"in t&&o(7,h=t.fov),"near"in t&&o(8,g=t.near),"far"in t&&o(9,$=t.far)},t.$$.update=()=>{33&t.$$.dirty&&("string"==typeof m?f(o(0,L=x(m))):L.set(m)),7248&t.$$.dirty&&o(10,T.matrix=(xt(T.matrix,r,d),i&&Et(T.matrix,A,i,p),T.matrix),T),1024&t.$$.dirty&&o(10,T.view=yt(T.view,T.matrix),T),26496&t.$$.dirty&&o(10,T.projection=function(t,n,e,o,r){var i,a=1/Math.tan(n/2);return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(i=1/(o-r),t[10]=(r+o)*i,t[14]=2*r*o*i):(t[10]=-1,t[14]=-2*o),t}(T.projection,h/180*Math.PI,a/s,g,$),T),1024&t.$$.dirty&&_(T)},[L,y,w,b,d,m,p,h,g,$]}class Mn extends rt{constructor(t){super(),ot(this,t,Ln,null,s,{location:4,lookAt:5,up:6,fov:7,near:8,far:9})}}class Fn{constructor(t,n,e,o,r,i){this.scene=t;const a=t.gl;this.attributes=e,this.index=o,this.primitive=r,this.count=i,this.locations={},this.buffers={};for(const t in e){const o=e[t];this.locations[t]=a.getAttribLocation(n,t);const r=a.createBuffer();this.buffers[t]=r,a.bindBuffer(a.ARRAY_BUFFER,r),a.bufferData(a.ARRAY_BUFFER,o.data,o.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW)}if(o){const t=a.createBuffer();this.buffers.__index=t,a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t),a.bufferData(a.ELEMENT_ARRAY_BUFFER,o,a.STATIC_DRAW)}}set_attributes(t){for(const n in this.attributes){const e=this.attributes[n],o=this.locations[n];if(o<0)continue;const{size:r=3,type:i=t.FLOAT,normalized:a=!1,stride:s=0,offset:c=0}=e,l=this.buffers[n];t.bindBuffer(t.ARRAY_BUFFER,l),t.enableVertexAttribArray(o),t.vertexAttribPointer(o,r,i,a,s,c)}}update(t,n,e){const o=this.scene,{gl:r}=o,i=this.attributes[t],a=this.buffers[t];if(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,i.data=n,i.dynamic?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.count=e,e===1/0)throw new Error("GL.Geometry must be instantiated with one or more { data, size } attributes");o.invalidate()}}class In{constructor(t={},n={}){this.attributes=t;const{index:e,primitive:o="TRIANGLES"}=n;this.index=e,this.primitive=o.toUpperCase(),this.count=Sn(t),this.instances=new Map}instantiate(t,n){return this.instances.has(n)||this.instances.set(n,new Fn(t,n,this.attributes,this.index,this.primitive,this.count)),this.instances.get(n)}update(t,n){this.attributes[t].data=n,this.count=Sn(this.attributes),this.instances.forEach(e=>{e.update(t,n,this.count)})}}function Sn(t){let n=1/0;for(const e in t){const o=t[e].data.length/t[e].size;o<n&&(n=o)}return n}var Rn=$t((t={})=>{const n={x:-.5,y:-.5,z:-.5,w:1,h:1,d:1};for(const e in n)e in t||(t[e]=n[e]);const e=[[t.x+t.w,t.y+t.h,t.z+t.d],[t.x,t.y+t.h,t.z+t.d],[t.x+t.w,t.y,t.z+t.d],[t.x,t.y,t.z+t.d],[t.x,t.y+t.h,t.z],[t.x+t.w,t.y+t.h,t.z],[t.x,t.y,t.z],[t.x+t.w,t.y,t.z]],o=[e[0],e[1],e[2],e[3],e[1],e[4],e[3],e[6],e[4],e[5],e[6],e[7],e[5],e[0],e[7],e[2],e[4],e[1],e[5],e[0],e[3],e[6],e[2],e[7]].flat(1/0);return new In({position:{data:new Float32Array(o),size:3},normal:{data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0]),size:3},uv:{data:new Float32Array([.5,.25,.25,.25,.5,.5,.25,.5,.25,.25,0,.25,.25,.5,0,.5,1,.25,.75,.25,1,.5,.75,.5,.75,.25,.5,.25,.75,.5,.5,.5,.25,0,.25,.25,.5,0,.5,.25,.25,.5,.25,.75,.5,.5,.5,.75]),size:2}},{index:new Uint32Array([0,1,2,3,2,1,4,5,6,7,6,5,8,9,10,11,10,9,12,13,14,15,14,13,16,17,18,19,18,17,20,21,22,23,22,21])})}),On=$t(()=>new In({position:{data:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),size:3},normal:{data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),size:3},uv:{data:new Float32Array([1,0,0,0,1,1,0,1]),size:2}},{index:new Uint32Array([0,1,2,3,2,1])}));const Dn=.85065080835204,Nn=.5257311121191336,Cn=new Float32Array([-Nn,+Dn,0,+Nn,+Dn,0,-Nn,-Dn,0,+Nn,-Dn,0,0,-Nn,+Dn,0,+Nn,+Dn,0,-Nn,-Dn,0,+Nn,-Dn,+Dn,0,-Nn,+Dn,0,+Nn,-Dn,0,-Nn,-Dn,0,+Nn]),Pn=new Uint16Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]),zn=(new In({position:{data:Cn,size:3},normal:{data:Cn,size:3}},{index:Pn}),Math.PI),Hn=2*zn;var Gn=$t(({turns:t=8,bands:n=6,shading:e="smooth"}={})=>"smooth"===e?function(t,n){const e=(t+1)*(n+1),o=2*(n-1)*t,r=new Float32Array(3*e),i=new Float32Array(2*e),a=new Uint32Array(3*o);let s=0,c=0;for(let e=0;e<=t;e+=1){const o=e/t;for(let t=0;t<=n;t+=1){const e=t/n,a=-Math.cos(o*Hn)*Math.sin(e*zn),l=Math.cos(e*zn),u=Math.sin(o*Hn)*Math.sin(e*zn);r[s++]=a,r[s++]=l,r[s++]=u,i[c++]=o,i[c++]=e}}let l=0;for(let e=0;e<t;e+=1){const t=e*(n+1);a[l++]=t+0,a[l++]=t+1,a[l++]=t+n+2;for(let e=1;e<n-1;e+=1)a[l++]=t+e,a[l++]=t+e+1,a[l++]=t+e+n+1,a[l++]=t+e+n+1,a[l++]=t+e+1,a[l++]=t+e+n+2;a[l++]=t+n-1,a[l++]=t+n,a[l++]=t+2*n}return new In({position:{data:r,size:3},normal:{data:r,size:3},uv:{data:i,size:2}},{index:a})}(t,n):function(t,n){throw new Error("TODO implement flat geometry")}());"undefined"!=typeof Blob&&URL.createObjectURL(new Blob(["self.onmessage = e => { self.onmessage = null; eval(e.data); };"],{type:"application/javascript"}))||"undefined"!=typeof window&&window.SVELTE_GL_WORKER_URL;function Un(t,n,e){const o=t.slice();return o[12]=n[e],o[16]=e,o}function kn(t,n,e){const o=t.slice();return o[12]=n[e],o[14]=e,o}function Bn(t){let n;const e=new Mn({props:{location:t[17],lookAt:"center",near:.01,far:1e3}});return{c(){tt(e.$$.fragment)},m(t,o){nt(e,t,o),n=!0},p(t,n){const o={};131072&n&&(o.location=t[17]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){Z(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Yn(t){let n;const e=new un({props:{geometry:Rn({x:0,y:0,z:0,w:Vn/t[1][t[16]].length,h:1*t[1][t[14]][t[16]],d:Jn/t[1].length}),location:[-Vn/2+t[16]*(Vn/t[1][0].length),0,-Jn/2+t[14]*(Jn/t[1].length)],rotation:[0,0,0],scale:[t[2],t[3],t[4]],uniforms:{color:Kn(t[0],t[1][t[14]][t[16]])}}});return{c(){tt(e.$$.fragment)},m(t,o){nt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.geometry=Rn({x:0,y:0,z:0,w:Vn/t[1][t[16]].length,h:1*t[1][t[14]][t[16]],d:Jn/t[1].length})),2&n&&(o.location=[-Vn/2+t[16]*(Vn/t[1][0].length),0,-Jn/2+t[14]*(Jn/t[1].length)]),28&n&&(o.scale=[t[2],t[3],t[4]]),3&n&&(o.uniforms={color:Kn(t[0],t[1][t[14]][t[16]])}),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){Z(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function qn(t){let n,e,o=Array(t[1][t[14]].length),r=[];for(let n=0;n<o.length;n+=1)r[n]=Yn(Un(t,o,n));const i=t=>Z(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=y("")},m(t,o){for(let n=0;n<r.length;n+=1)r[n].m(t,o);g(t,n,o),e=!0},p(t,e){if(31&e){let a;for(o=Array(t[1][t[14]].length),a=0;a<o.length;a+=1){const i=Un(t,o,a);r[a]?(r[a].p(i,e),Q(r[a],1)):(r[a]=Yn(i),r[a].c(),Q(r[a],1),r[a].m(n.parentNode,n))}for(J(),a=o.length;a<r.length;a+=1)i(a);K()}},i(t){if(!e){for(let t=0;t<o.length;t+=1)Q(r[t]);e=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Z(r[t]);e=!1},d(t){v(r,t),t&&$(n)}}}function jn(t){let e,o;const r=new un({props:{geometry:Gn({turns:36,bands:36}),location:[0,.2,0],scale:.1,uniforms:{color:16777215,emissive:16711680}}}),i=new vn({props:{location:[0,0,0],color:16711680,intensity:.6}});return{c(){tt(r.$$.fragment),e=w(),tt(i.$$.fragment)},m(t,n){nt(r,t,n),g(t,e,n),nt(i,t,n),o=!0},p:n,i(t){o||(Q(r.$$.fragment,t),Q(i.$$.fragment,t),o=!0)},o(t){Z(r.$$.fragment,t),Z(i.$$.fragment,t),o=!1},d(t){et(r,t),t&&$(e),et(i,t)}}}function Xn(t){let n,e,o,r,i,a,s,c,l,u,f,d,m;const p=new dn({props:{id:"center",location:[0,t[3]/2,0]}}),h=new Tn({props:{maxPolarAngle:Math.PI/2,$$slots:{default:[Bn,({location:t})=>({17:t}),({location:t})=>t?131072:0]},$$scope:{ctx:t}}}),_=new pn({props:{intensity:.3}}),y=new gn({props:{direction:[-1,-1,-1],intensity:.5}});let x=Array(t[1].length),b=[];for(let n=0;n<x.length;n+=1)b[n]=qn(kn(t,x,n));const E=t=>Z(b[t],1,1,()=>{b[t]=null}),A=new un({props:{geometry:Gn({turns:36,bands:36}),location:[-.5,2.4,1.2],scale:.4,uniforms:{color:1193046,alpha:.9},transparent:!0}}),T=new un({props:{geometry:Gn({turns:36,bands:36}),location:[-1.4,2.6,.2],scale:.6,uniforms:{color:3368516,alpha:1},transparent:!0}}),L=new un({props:{geometry:On(),location:[0,-.01,0],rotation:[-90,0,0],scale:10,uniforms:{color:16777215}}}),M=new un({props:{geometry:On(),location:[0,5,0],rotation:[90,0,0],scale:10,uniforms:{color:16777215}}}),F=new un({props:{geometry:On(),location:[0,-.01,-10],rotation:[0,0,0],scale:10,uniforms:{color:16777215}}}),I=new un({props:{geometry:On(),location:[10,-.01,0],rotation:[0,-90,0],scale:10,uniforms:{color:16777215}}}),S=new un({props:{geometry:On(),location:[-10,-.01,0],rotation:[0,90,0],scale:10,uniforms:{color:16777215}}}),R=new Qt({props:{location:[t[5].x,t[5].y,t[5].z],$$slots:{default:[jn]},$$scope:{ctx:t}}});return{c(){tt(p.$$.fragment),n=w(),tt(h.$$.fragment),e=w(),tt(_.$$.fragment),o=w(),tt(y.$$.fragment),r=w();for(let t=0;t<b.length;t+=1)b[t].c();i=w(),tt(A.$$.fragment),a=w(),tt(T.$$.fragment),s=w(),tt(L.$$.fragment),c=w(),tt(M.$$.fragment),l=w(),tt(F.$$.fragment),u=w(),tt(I.$$.fragment),f=w(),tt(S.$$.fragment),d=w(),tt(R.$$.fragment)},m(t,$){nt(p,t,$),g(t,n,$),nt(h,t,$),g(t,e,$),nt(_,t,$),g(t,o,$),nt(y,t,$),g(t,r,$);for(let n=0;n<b.length;n+=1)b[n].m(t,$);g(t,i,$),nt(A,t,$),g(t,a,$),nt(T,t,$),g(t,s,$),nt(L,t,$),g(t,c,$),nt(M,t,$),g(t,l,$),nt(F,t,$),g(t,u,$),nt(I,t,$),g(t,f,$),nt(S,t,$),g(t,d,$),nt(R,t,$),m=!0},p(t,n){const e={};8&n&&(e.location=[0,t[3]/2,0]),p.$set(e);const o={};if(393216&n&&(o.$$scope={dirty:n,ctx:t}),h.$set(o),31&n){let e;for(x=Array(t[1].length),e=0;e<x.length;e+=1){const o=kn(t,x,e);b[e]?(b[e].p(o,n),Q(b[e],1)):(b[e]=qn(o),b[e].c(),Q(b[e],1),b[e].m(i.parentNode,i))}for(J(),e=x.length;e<b.length;e+=1)E(e);K()}const r={};32&n&&(r.location=[t[5].x,t[5].y,t[5].z]),262144&n&&(r.$$scope={dirty:n,ctx:t}),R.$set(r)},i(t){if(!m){Q(p.$$.fragment,t),Q(h.$$.fragment,t),Q(_.$$.fragment,t),Q(y.$$.fragment,t);for(let t=0;t<x.length;t+=1)Q(b[t]);Q(A.$$.fragment,t),Q(T.$$.fragment,t),Q(L.$$.fragment,t),Q(M.$$.fragment,t),Q(F.$$.fragment,t),Q(I.$$.fragment,t),Q(S.$$.fragment,t),Q(R.$$.fragment,t),m=!0}},o(t){Z(p.$$.fragment,t),Z(h.$$.fragment,t),Z(_.$$.fragment,t),Z(y.$$.fragment,t),b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)Z(b[t]);Z(A.$$.fragment,t),Z(T.$$.fragment,t),Z(L.$$.fragment,t),Z(M.$$.fragment,t),Z(F.$$.fragment,t),Z(I.$$.fragment,t),Z(S.$$.fragment,t),Z(R.$$.fragment,t),m=!1},d(t){et(p,t),t&&$(n),et(h,t),t&&$(e),et(_,t),t&&$(o),et(y,t),t&&$(r),v(b,t),t&&$(i),et(A,t),t&&$(a),et(T,t),t&&$(s),et(L,t),t&&$(c),et(M,t),t&&$(l),et(F,t),t&&$(u),et(I,t),t&&$(f),et(S,t),t&&$(d),et(R,t)}}}function Wn(t){let n,e,o,r,a,s,c,l,u,f,d,m,p,v,E,M,F,I,S,R,O,D,N,C,P,z,H,G,U,k,B,Y,q;const j=new zt({props:{$$slots:{default:[Xn]},$$scope:{ctx:t}}});return{c(){tt(j.$$.fragment),n=w(),e=_("div"),o=_("label"),r=_("input"),a=w(),s=_("label"),c=_("input"),d=y(" width ("),m=y(t[2]),p=y(")"),v=w(),E=_("label"),M=_("input"),R=y(" height ("),O=y(t[3]),D=y(")"),N=w(),C=_("label"),P=_("input"),U=y(" depth ("),k=y(t[4]),B=y(")"),b(r,"type","color"),L(r,"height","40px"),b(c,"type","range"),b(c,"min",l=.1),b(c,"max",u=5),b(c,"step",f=.1),b(M,"type","range"),b(M,"min",F=.1),b(M,"max",I=5),b(M,"step",S=.1),b(P,"type","range"),b(P,"min",z=.1),b(P,"max",H=5),b(P,"step",G=.1),b(e,"class","controls svelte-8u7g17")},m(i,l){nt(j,i,l),g(i,n,l),g(i,e,l),h(e,o),h(o,r),T(r,t[0]),h(e,a),h(e,s),h(s,c),T(c,t[2]),h(s,d),h(s,m),h(s,p),h(e,v),h(e,E),h(E,M),T(M,t[3]),h(E,R),h(E,O),h(E,D),h(e,N),h(e,C),h(C,P),T(P,t[4]),h(C,U),h(C,k),h(C,B),Y=!0,q=[x(r,"input",t[8]),x(c,"change",t[9]),x(c,"input",t[9]),x(M,"change",t[10]),x(M,"input",t[10]),x(P,"change",t[11]),x(P,"input",t[11])]},p(t,[n]){const e={};262207&n&&(e.$$scope={dirty:n,ctx:t}),j.$set(e),1&n&&T(r,t[0]),4&n&&T(c,t[2]),(!Y||4&n)&&A(m,t[2]),8&n&&T(M,t[3]),(!Y||8&n)&&A(O,t[3]),16&n&&T(P,t[4]),(!Y||16&n)&&A(k,t[4])},i(t){Y||(Q(j.$$.fragment,t),Y=!0)},o(t){Z(j.$$.fragment,t),Y=!1},d(t){et(j,t),t&&$(n),t&&$(e),i(q)}}}const Vn=10,Jn=10;function Kn(t,n=1){const e=parseInt("0x"+t.substr(1,2),16),o=parseInt("0x"+t.substr(3,2),16),r=parseInt("0x"+t.substr(5,2),16),i=Math.floor(e*(n/.25)),a=Math.floor(r*(n/.25));return Math.abs(((i<255?i:e)<<16)+(o<<8)+(a<255?a:r))}function Qn(t,n,e){let{title:o}=n,{color:r="#ff3e00"}=n;const i=JSON.parse(document.getElementById("gl_data_in_html").children[0].innerHTML),a=[];for(let t=0;t<i.length;t++){const n=[];for(const e of Object.getOwnPropertyNames(i[t]))n.push(i[t][e]);a[t]=n}console.log(a);let s=1,c=1,l=1;const u={};return S(()=>{let t;const n=()=>{t=requestAnimationFrame(n),e(5,u.x=3*Math.sin(.001*Date.now()),u),e(5,u.y=2.5+2*Math.sin(4e-4*Date.now()),u),e(5,u.z=3*Math.cos(.002*Date.now()),u)};return n(),()=>cancelAnimationFrame(t)}),t.$set=t=>{"title"in t&&e(6,o=t.title),"color"in t&&e(0,r=t.color)},[r,a,s,c,l,u,o,i,function(){r=this.value,e(0,r)},function(){s=E(this.value),e(2,s)},function(){c=E(this.value),e(3,c)},function(){l=E(this.value),e(4,l)}]}function Zn(t){let e,o,r,a,s,c,l,u,f,d,m,p,v,E,A,T,L,M,F,I,S,R,O,D,N,C,P,z,H;return{c(){e=_("div"),o=_("button"),o.textContent="1",r=w(),a=_("button"),a.textContent="2",s=w(),c=_("button"),c.textContent="3",l=w(),u=_("button"),u.textContent="4",f=w(),d=_("button"),d.textContent="5",m=w(),p=_("button"),p.textContent="6",v=w(),E=_("button"),E.textContent="7",A=w(),T=_("button"),T.textContent="8",L=w(),M=_("button"),M.textContent="9",F=w(),I=_("button"),S=y("clear"),O=w(),D=_("button"),D.textContent="0",N=w(),C=_("button"),P=y("submit"),b(o,"class","svelte-el36x5"),b(a,"class","svelte-el36x5"),b(c,"class","svelte-el36x5"),b(u,"class","svelte-el36x5"),b(d,"class","svelte-el36x5"),b(p,"class","svelte-el36x5"),b(E,"class","svelte-el36x5"),b(T,"class","svelte-el36x5"),b(M,"class","svelte-el36x5"),I.disabled=R=!t[0],b(I,"class","svelte-el36x5"),b(D,"class","svelte-el36x5"),C.disabled=z=!t[0],b(C,"class","svelte-el36x5"),b(e,"class","keypad svelte-el36x5")},m(n,i){g(n,e,i),h(e,o),h(e,r),h(e,a),h(e,s),h(e,c),h(e,l),h(e,u),h(e,f),h(e,d),h(e,m),h(e,p),h(e,v),h(e,E),h(e,A),h(e,T),h(e,L),h(e,M),h(e,F),h(e,I),h(I,S),h(e,O),h(e,D),h(e,N),h(e,C),h(C,P),H=[x(o,"click",t[1](1)),x(a,"click",t[1](2)),x(c,"click",t[1](3)),x(u,"click",t[1](4)),x(d,"click",t[1](5)),x(p,"click",t[1](6)),x(E,"click",t[1](7)),x(T,"click",t[1](8)),x(M,"click",t[1](9)),x(I,"click",t[2]),x(D,"click",t[1](0)),x(C,"click",t[3])]},p(t,[n]){1&n&&R!==(R=!t[0])&&(I.disabled=R),1&n&&z!==(z=!t[0])&&(C.disabled=z)},i:n,o:n,d(t){t&&$(e),i(H)}}}function te(t,n,e){let{value:o=""}=n;const r=O();return t.$set=t=>{"value"in t&&e(0,o=t.value)},[o,t=>()=>e(0,o+=t),()=>e(0,o=""),()=>r("submit")]}class ne extends rt{constructor(t){super(),ot(this,t,te,Zn,s,{value:0})}}function ee(t){let n;const e=new Mn({props:{location:t[15],lookAt:"center",near:.01,far:1e3}});return{c(){tt(e.$$.fragment)},m(t,o){nt(e,t,o),n=!0},p(t,n){const o={};32768&n&&(o.location=t[15]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){Z(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function oe(t){let e,o;const r=new un({props:{geometry:Gn({turns:36,bands:36}),location:[0,.2,0],scale:.1,uniforms:{color:16777215,emissive:16711680}}}),i=new vn({props:{location:[0,0,0],color:16711680,intensity:.6}});return{c(){tt(r.$$.fragment),e=w(),tt(i.$$.fragment)},m(t,n){nt(r,t,n),g(t,e,n),nt(i,t,n),o=!0},p:n,i(t){o||(Q(r.$$.fragment,t),Q(i.$$.fragment,t),o=!0)},o(t){Z(r.$$.fragment,t),Z(i.$$.fragment,t),o=!1},d(t){et(r,t),t&&$(e),et(i,t)}}}function re(t){let n,e,o,r,i,a,s,c,l,u,f,d,m;const p=new dn({props:{id:"center",location:[0,t[4]/2,0]}}),h=new Tn({props:{maxPolarAngle:Math.PI/2,$$slots:{default:[ee,({location:t})=>({15:t}),({location:t})=>t?32768:0]},$$scope:{ctx:t}}}),v=new pn({props:{intensity:.3}}),_=new gn({props:{direction:[-1,-1,-1],intensity:.5}}),y=new un({props:{geometry:Rn({}),location:[0,t[4]/2,0],rotation:[0,-20,0],scale:[t[3],t[4],t[5]],uniforms:{color:t[8](t[0])}}}),x=new un({props:{geometry:Gn({turns:36,bands:36}),location:[-.5,.4,1.2],scale:.4,uniforms:{color:1193046,alpha:.9},transparent:!0}}),b=new un({props:{geometry:Gn({turns:36,bands:36}),location:[-1.4,.6,.2],scale:.6,uniforms:{color:3368516,alpha:1},transparent:!0}}),E=new un({props:{geometry:On(),location:[0,-.01,0],rotation:[-90,0,0],scale:10,uniforms:{color:16777215}}}),A=new un({props:{geometry:On(),location:[0,5,0],rotation:[90,0,0],scale:10,uniforms:{color:16777215}}}),T=new un({props:{geometry:On(),location:[0,-.01,-10],rotation:[0,0,0],scale:10,uniforms:{color:16777215}}}),L=new un({props:{geometry:On(),location:[10,-.01,0],rotation:[0,-90,0],scale:10,uniforms:{color:16777215}}}),M=new un({props:{geometry:On(),location:[-10,-.01,0],rotation:[0,90,0],scale:10,uniforms:{color:16777215}}}),F=new Qt({props:{location:[t[6].x,t[6].y,t[6].z],$$slots:{default:[oe]},$$scope:{ctx:t}}});return{c(){tt(p.$$.fragment),n=w(),tt(h.$$.fragment),e=w(),tt(v.$$.fragment),o=w(),tt(_.$$.fragment),r=w(),tt(y.$$.fragment),i=w(),tt(x.$$.fragment),a=w(),tt(b.$$.fragment),s=w(),tt(E.$$.fragment),c=w(),tt(A.$$.fragment),l=w(),tt(T.$$.fragment),u=w(),tt(L.$$.fragment),f=w(),tt(M.$$.fragment),d=w(),tt(F.$$.fragment)},m(t,$){nt(p,t,$),g(t,n,$),nt(h,t,$),g(t,e,$),nt(v,t,$),g(t,o,$),nt(_,t,$),g(t,r,$),nt(y,t,$),g(t,i,$),nt(x,t,$),g(t,a,$),nt(b,t,$),g(t,s,$),nt(E,t,$),g(t,c,$),nt(A,t,$),g(t,l,$),nt(T,t,$),g(t,u,$),nt(L,t,$),g(t,f,$),nt(M,t,$),g(t,d,$),nt(F,t,$),m=!0},p(t,n){const e={};16&n&&(e.location=[0,t[4]/2,0]),p.$set(e);const o={};98304&n&&(o.$$scope={dirty:n,ctx:t}),h.$set(o);const r={};16&n&&(r.location=[0,t[4]/2,0]),56&n&&(r.scale=[t[3],t[4],t[5]]),1&n&&(r.uniforms={color:t[8](t[0])}),y.$set(r);const i={};64&n&&(i.location=[t[6].x,t[6].y,t[6].z]),65536&n&&(i.$$scope={dirty:n,ctx:t}),F.$set(i)},i(t){m||(Q(p.$$.fragment,t),Q(h.$$.fragment,t),Q(v.$$.fragment,t),Q(_.$$.fragment,t),Q(y.$$.fragment,t),Q(x.$$.fragment,t),Q(b.$$.fragment,t),Q(E.$$.fragment,t),Q(A.$$.fragment,t),Q(T.$$.fragment,t),Q(L.$$.fragment,t),Q(M.$$.fragment,t),Q(F.$$.fragment,t),m=!0)},o(t){Z(p.$$.fragment,t),Z(h.$$.fragment,t),Z(v.$$.fragment,t),Z(_.$$.fragment,t),Z(y.$$.fragment,t),Z(x.$$.fragment,t),Z(b.$$.fragment,t),Z(E.$$.fragment,t),Z(A.$$.fragment,t),Z(T.$$.fragment,t),Z(L.$$.fragment,t),Z(M.$$.fragment,t),Z(F.$$.fragment,t),m=!1},d(t){et(p,t),t&&$(n),et(h,t),t&&$(e),et(v,t),t&&$(o),et(_,t),t&&$(r),et(y,t),t&&$(i),et(x,t),t&&$(a),et(b,t),t&&$(s),et(E,t),t&&$(c),et(A,t),t&&$(l),et(T,t),t&&$(u),et(L,t),t&&$(f),et(M,t),t&&$(d),et(F,t)}}}function ie(t){let n,e,o,r,a,s,c,l,u,f,d,m,p,v,E,M,F,I,S,R,O,D,N,C,z,G,U,k,B,Y,q,j,X,W,V,J,K,ot,rt;const it=new zt({props:{$$slots:{default:[re]},$$scope:{ctx:t}}});function at(n){t[14].call(null,n)}let st={};void 0!==t[1]&&(st.value=t[1]);const ct=new ne({props:st});return P.push(()=>function(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}(ct,"value",at)),ct.$on("submit",t[7]),{c(){tt(it.$$.fragment),n=w(),e=_("div"),o=_("label"),r=_("input"),a=w(),s=_("label"),c=_("input"),d=y(" width ("),m=y(t[3]),p=y(")"),v=w(),E=_("label"),M=_("input"),R=y(" height ("),O=y(t[4]),D=y(")"),N=w(),C=_("label"),z=_("input"),B=y(" depth ("),Y=y(t[5]),q=y(")"),j=w(),X=_("div"),W=_("h1"),V=y(t[2]),J=w(),tt(ct.$$.fragment),b(r,"type","color"),L(r,"height","40px"),b(c,"type","range"),b(c,"min",l=.1),b(c,"max",u=5),b(c,"step",f=.1),b(M,"type","range"),b(M,"min",F=.1),b(M,"max",I=5),b(M,"step",S=.1),b(z,"type","range"),b(z,"min",G=.1),b(z,"max",U=5),b(z,"step",k=.1),b(e,"class","controls svelte-1lna7uf"),L(W,"color",t[1]?"#999":"#fff"),b(W,"class","svelte-1lna7uf"),b(X,"class","controls keys svelte-1lna7uf")},m(i,l){nt(it,i,l),g(i,n,l),g(i,e,l),h(e,o),h(o,r),T(r,t[0]),h(e,a),h(e,s),h(s,c),T(c,t[3]),h(s,d),h(s,m),h(s,p),h(e,v),h(e,E),h(E,M),T(M,t[4]),h(E,R),h(E,O),h(E,D),h(e,N),h(e,C),h(C,z),T(z,t[5]),h(C,B),h(C,Y),h(C,q),g(i,j,l),g(i,X,l),h(X,W),h(W,V),h(X,J),nt(ct,X,null),ot=!0,rt=[x(r,"input",t[10]),x(c,"change",t[11]),x(c,"input",t[11]),x(M,"change",t[12]),x(M,"input",t[12]),x(z,"change",t[13]),x(z,"input",t[13])]},p(t,[n]){const e={};65657&n&&(e.$$scope={dirty:n,ctx:t}),it.$set(e),1&n&&T(r,t[0]),8&n&&T(c,t[3]),(!ot||8&n)&&A(m,t[3]),16&n&&T(M,t[4]),(!ot||16&n)&&A(O,t[4]),32&n&&T(z,t[5]),(!ot||32&n)&&A(Y,t[5]),(!ot||4&n)&&A(V,t[2]),(!ot||2&n)&&L(W,"color",t[1]?"#999":"#fff");const o={};var i;!K&&2&n&&(K=!0,o.value=t[1],i=()=>K=!1,H.push(i)),ct.$set(o)},i(t){ot||(Q(it.$$.fragment,t),Q(ct.$$.fragment,t),ot=!0)},o(t){Z(it.$$.fragment,t),Z(ct.$$.fragment,t),ot=!1},d(t){et(it,t),t&&$(n),t&&$(e),t&&$(j),t&&$(X),et(ct),i(rt)}}}function ae(t,n,e){let o,r,{title:i}=n;let{color:a="#ff3e00"}=n,s=1,c=1,l=1;const u={};return S(()=>{let t;const n=()=>{t=requestAnimationFrame(n),e(6,u.x=3*Math.sin(.001*Date.now()),u),e(6,u.y=2.5+2*Math.sin(4e-4*Date.now()),u),e(6,u.z=3*Math.cos(.002*Date.now()),u)};return n(),()=>cancelAnimationFrame(t)}),t.$set=t=>{"title"in t&&e(9,i=t.title),"color"in t&&e(0,a=t.color)},t.$$.update=()=>{2&t.$$.dirty&&e(2,r=o?o.replace(/\d(?!$)/g,"*"):"enter your pin")},[a,o,r,s,c,l,u,function(){alert(`submitted ${o}`)},t=>parseInt(t.slice(1),16),i,function(){a=this.value,e(0,a)},function(){s=E(this.value),e(3,s)},function(){c=E(this.value),e(4,c)},function(){l=E(this.value),e(5,l)},function(t){o=t,e(1,o)}]}const se=document.getElementById("svelte-app");var ce=null===se||"HTMLElement"!==se.constructor.name&&"HTMLDivElement"!==se.constructor.name?{}:new class extends rt{constructor(t){super(),ot(this,t,at,it,s,{greeting:0})}}({target:se,props:{greeting:'Hooray  - you\'ve built this with <a href="https://github.com/dancingfrog/sveltr" target="_blank">Sveltr</a>!'}});const le=document.getElementById("test-app"),ue=null===le||"HTMLElement"!==le.constructor.name&&"HTMLDivElement"!==le.constructor.name?{}:new class extends rt{constructor(t){super(),ot(this,t,ae,ie,s,{title:9,color:0})}}({target:le,props:{title:" Hello Svelte!"}}),fe=document.getElementById("gl-app"),de=null===fe||"HTMLElement"!==fe.constructor.name&&"HTMLDivElement"!==fe.constructor.name?{}:new class extends rt{constructor(t){super(),ot(this,t,Qn,Wn,s,{title:6,color:0})}}({target:fe,props:{title:" Hello SvelteGL!"}});return t.default=ce,t.glApp=de,t.testApp=ue,t}({});
//# sourceMappingURL=main.js.map
